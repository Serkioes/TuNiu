import{_ as R,q as F,d as c,e as U,s as h,c as m,a as e,x as j,m as A,b as a,f as r,i as v,t as S,j as _,v as b,r as o,o as g,F as D,g as E,h as T,p as $,l as G}from"./index-CpFgVaXK.js";const i=p=>($("data-v-f431ee6a"),p=p(),G(),p),H={class:"booking"},K={class:"title"},Q={class:"other"},W=i(()=>e("path",{d:"M512 215.253333a240.341333 240.341333 0 0 1 165.866667-65.792V149.333333c61.290667 0 122.56 23.082667 169.322666 69.248 46.762667 46.165333 70.144 106.666667 70.144 167.146667s-23.381333 120.981333-70.144 167.146667l-174.848 172.629333-138.794666 137.024a30.656 30.656 0 0 1-43.093334 0L176.832 552.874667A234.069333 234.069333 0 0 1 106.666667 385.706667c0-60.501333 23.381333-121.002667 70.144-167.146667a240.256 240.256 0 0 1 169.301333-69.12V149.333333C405.909333 149.333333 465.706667 171.306667 512 215.253333z m35.050667 121.002667a30.506667 30.506667 0 0 1 21.568-8.96 30.784 30.784 0 0 1 21.653333 8.832 30.08 30.08 0 0 1 8.917333 21.354667 29.738667 29.738667 0 0 1-9.066666 21.312l-138.794667 137.002666a30.677333 30.677333 0 0 1-42.794667-0.277333 29.866667 29.866667 0 0 1-0.277333-42.24l138.794667-137.024z m69.418666 68.522667a30.506667 30.506667 0 0 1 21.653334-9.216 30.805333 30.805333 0 0 1 21.824 8.810666 30.037333 30.037333 0 0 1 8.917333 21.546667 29.717333 29.717333 0 0 1-9.344 21.397333l-184.469333 182.101334a30.656 30.656 0 0 1-42.858667-0.213334 29.866667 29.866667 0 0 1-0.213333-42.304l184.469333-182.122666z m69.397334 68.522666a30.656 30.656 0 0 1 42.858666 0.213334 29.866667 29.866667 0 0 1 0.213334 42.304l-138.794667 137.024a30.656 30.656 0 0 1-42.837333-0.213334 29.866667 29.866667 0 0 1-0.213334-42.304l138.773334-137.024z m-152.32-194.282666l-90.282667 89.066666a30.506667 30.506667 0 0 1-21.610667 9.024 30.826667 30.826667 0 0 1-21.696-8.789333 30.08 30.08 0 0 1-8.917333-21.418667 29.738667 29.738667 0 0 1 9.152-21.333333l68.693333-67.818667a179.2 179.2 0 0 0-122.752-48.256v-0.128c-45.632 0-91.306667 17.237333-126.250666 51.754667a174.592 174.592 0 0 0 0 249.237333L512 798.741333l117.269333-115.754666 174.848-172.629334a174.570667 174.570667 0 0 0 52.288-124.629333 174.506667 174.506667 0 0 0-52.266666-124.608 179.178667 179.178667 0 0 0-126.272-51.626667v-0.128c-45.610667 0-91.306667 17.237333-126.229334 51.754667l-18.112 17.856v0.021333z","p-id":"6220"},null,-1)),X=[W],Y=i(()=>e("span",null,"客服电话:95010",-1)),Z=i(()=>e("span",null,"客服",-1)),e6=i(()=>e("span",null,"预订须知",-1)),s6={class:"content"},t6={class:"left"},a6={class:"userName item"},n6={class:"passengerInfo item"},o6=i(()=>e("h1",{style:{"font-weight":"700","font-size":"22px","margin-top":"20px"}},"乘客信息",-1)),l6={class:"topic",style:{"margin-top":"6px"}},i6=i(()=>e("span",null,"请选择乘客",-1)),c6={class:"passenger"},r6=i(()=>e("div",{class:"tips item"},[e("p",null,"立即预订产品说明: 30元/人,包含国内租车券、线上极速退改签、7*24小时预订+客服服务。"),e("p",null,"请您在提交订单前仔细阅读 火车票服务协议，火车票预订须知"),e("p",null,"由上海顺途科技有限公司提供服务，查看 营业执照")],-1)),p6={class:"right"},d6={__name:"Booking",setup(p){const f=F(),d=c(JSON.parse(f.query.ticket)),w=c([]),I=async()=>await _.get("/passenger/list?userId="+sessionStorage.getItem("userId")+"&pageSize=1000");U(async()=>{const s=await I();w.value=s.data.list});const u=c([]),C=h(()=>sessionStorage.getItem("userName")),N=h(async()=>{const s=await _.get("/city/which?name="+d.value.startStation);return{lng:s.data.lng,lat:s.data.lat}}),k=c({}),z=h(async()=>{const s=await _.get("/city/which?name="+d.value.endStation);return{lng:s.data.lng,lat:s.data.lat}}),x=c({}),B=({BMap:s,map:t})=>{N.value.then(l=>{k.value=l}),z.value.then(l=>{x.value=l})},V=async()=>{let s=new URLSearchParams;JSON.parse(f.query.ticket),s.append("userId",sessionStorage.getItem("userId")),s.append("passengers",JSON.stringify(u.value)),s.append("id",d.value.id),s.append("price",JSON.stringify(d.value.price*u.value.length));const t=await _.post("/orders/save",s);alert(t.data),b.push("/order/train")};return(s,t)=>{const l=o("el-step"),J=o("el-steps"),L=o("arrow-down"),O=o("el-icon"),q=o("el-checkbox"),M=o("el-checkbox-group"),y=o("bm-marker"),P=o("baidu-map");return g(),m("div",H,[e("div",K,[e("img",{src:j,style:{width:"280px",height:"100px","margin-left":"-10px",cursor:"pointer"},onClick:t[0]||(t[0]=n=>A(b).push("/"))}),a(J,{style:{"max-width":"600px"},space:200,active:0,"finish-status":"success",class:"step"},{default:r(()=>[a(l,{title:"填写"}),a(l,{title:"支付"}),a(l,{title:"完成"})]),_:1}),e("div",Q,[e("span",null,[(g(),m("svg",{onClick:t[1]||(t[1]=(...n)=>s.stupid&&s.stupid(...n)),t:"1725440610455",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"6219",width:"19",height:"19"},X)),v(" 网站无障碍 ")]),Y,Z,e6])]),e("div",s6,[e("div",t6,[e("div",a6,S(C.value),1),e("div",n6,[o6,e("div",l6,[i6,e("span",null,[v(" 所有乘客 "),a(O,{class:"el-icon--right"},{default:r(()=>[a(L)]),_:1})])]),e("div",c6,[a(M,{modelValue:u.value,"onUpdate:modelValue":t[2]||(t[2]=n=>u.value=n),onChange:s.handleCheckedCitiesChange},{default:r(()=>[(g(!0),m(D,null,E(w.value,n=>(g(),T(q,{key:n.id,label:n.id,value:n.id},{default:r(()=>[v(S(n.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])])]),r6,e("div",{class:"button item",onClick:V}," 预定 ")]),e("div",p6,[a(P,{class:"map",center:{lng:116.404,lat:39.915},zoom:5,onReady:B},{default:r(()=>[a(y,{position:k.value,dragging:!0},null,8,["position"]),a(y,{position:x.value,dragging:!0},null,8,["position"])]),_:1})])])])}}},_6=R(d6,[["__scopeId","data-v-f431ee6a"]]);export{_6 as default};
