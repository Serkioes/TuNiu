import{_ as $,d as p,e as B,c as J,a as b,b as e,f as o,j as C,v as P,r as n,o as j,i,t as D,p as F,l as M}from"./index-CpFgVaXK.js";const R=v=>(F("data-v-af0200f2"),v=v(),M(),v),A={class:"passengerInfo"},G={class:"condition"},H=R(()=>b("span",null,"旅客姓名",-1)),K=["onClick"],Q=["onClick"],X={slot:"footer",class:"dialog-footer"},Y={__name:"PassengerInfo",setup(v){const w=p(""),c=p(10),_=p({}),t=p({userId:JSON.parse(sessionStorage.getItem("userId"))}),I=p(),f=p(!1),m=r=>{C({method:"get",url:"passenger/list",params:{userId:JSON.parse(sessionStorage.getItem("userId")),name:w.value,pageNum:r,pageSize:c.value}}).then(l=>{_.value=l.data})},S=r=>{c.value=r,m(1)};B(()=>{m(1)});const U=()=>{sessionStorage.getItem("userId")===null&&(alert("登录已过期，请重新登录"),P.push("/login")),f.value=!0},h=()=>{f.value=!1,t.value={},m(1)},L=()=>{I.value.validate(r=>{r&&C.post("passenger/save",t.value).then(l=>{l.data.code===200?(alert(l.data.msg),h(),m(1)):alert(l.data.msg)})})},W=r=>{t.value=r,f.value=!0},k=r=>{confirm("你确认删除吗?")&&C.post("passenger/del?id="+r).then(l=>{alert(l.data),h()})},q=p({phone:[{required:!0,message:"请输入手机号码",trigger:"blur"},{min:11,max:11,message:"手机号码长度不正确",trigger:"blur"},{pattern:/^1[3456789]\d{9}$/,message:"手机号码格式不正确",trigger:"blur"},{validator:(r,l,d)=>{l.indexOf(" ")>-1?d(new Error("手机号不能包含空格")):d()}}],name:[{required:!0,message:"请输入姓名",trigger:"blur"},{validator:(r,l,d)=>{l.indexOf(" ")>-1?d(new Error("姓名不能包含空格")):d()}}],idCard:[{required:!0,message:"请输入身份证号",trigger:"blur"},{validator:(r,l,d)=>{l.indexOf(" ")>-1?d(new Error("身份证号不能包含空格")):d()}}],type:[{required:!0,message:"请选择票务类型",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"blur"}],often:[{required:!0,message:"请选择常旅客卡",trigger:"blur"}],country:[{required:!0,message:"请选择国籍",trigger:"blur"}],cardType:[{required:!0,message:"请选择证件类型",trigger:"blur"}]});return(r,l)=>{const d=n("el-input"),V=n("el-button"),u=n("el-table-column"),N=n("el-table"),T=n("el-pagination"),s=n("el-form-item"),g=n("el-option"),x=n("el-select"),y=n("el-radio"),z=n("el-form"),O=n("el-dialog");return j(),J("div",A,[b("div",G,[H,e(d,{modelValue:w.value,"onUpdate:modelValue":l[0]||(l[0]=a=>w.value=a),placeholder:"中文名/英文名",style:{width:"200px","margin-left":"-10px",height:"25px","margin-top":"4px"}},null,8,["modelValue"]),e(V,{style:{"margin-left":"10px",height:"25px","margin-top":"4px"},onClick:l[1]||(l[1]=a=>m(1))},{default:o(()=>[i("搜索")]),_:1}),e(V,{style:{"margin-left":"10px",height:"25px","margin-top":"4px"},onClick:U},{default:o(()=>[i("新增")]),_:1})]),e(N,{ref:"multipleTableRef",data:_.value.list,style:{width:"100%"},onSelectionChange:r.handleSelectionChange},{default:o(()=>[e(u,{type:"selection"}),e(u,{property:"name",label:"姓名",width:"100px"}),e(u,{property:"phone",label:"手机/电话",width:"130px"}),e(u,{property:"cardType",label:"证件类型",width:"100px"}),e(u,{property:"idCard",label:"证件号码",width:"140px"}),e(u,{property:"country",label:"国籍",width:"100px"}),e(u,{property:"gender",label:"性别",width:"90px"}),e(u,{property:"often",label:"常旅客卡",width:"90px"}),e(u,{label:"操作"},{default:o(a=>[i(D(a.row.status)+" ",1),b("span",{class:"button",onClick:E=>W(a.row)},"修改",8,K),b("span",{class:"button",onClick:E=>k(a.row.id)},"删除",8,Q)]),_:1})]),_:1},8,["data","onSelectionChange"]),e(T,{onSizeChange:S,onCurrentChange:m,"current-page":_.value.pageNum,"page-size":c.value,layout:"prev, pager, next",total:_.value.total},null,8,["current-page","page-size","total"]),e(O,{title:"用户",modelValue:f.value,"onUpdate:modelValue":l[13]||(l[13]=a=>f.value=a),"before-close":h},{default:o(()=>[e(z,{model:t.value,rules:q.value,ref_key:"sb",ref:I},{default:o(()=>[e(s,{style:{"margin-left":"43px"},label:"","label-width":r.formLabelWidth},{default:o(()=>[e(d,{modelValue:t.value.userId,"onUpdate:modelValue":l[2]||(l[2]=a=>t.value.userId=a),"auto-complete":"off",type:"hidden"},null,8,["modelValue"])]),_:1},8,["label-width"]),e(s,{style:{"margin-left":"33px"},label:"姓名","label-width":r.formLabelWidth,prop:"name"},{default:o(()=>[e(d,{modelValue:t.value.name,"onUpdate:modelValue":l[3]||(l[3]=a=>t.value.name=a),"auto-complete":"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),e(s,{label:"手机/电话","label-width":r.formLabelWidth,prop:"phone"},{default:o(()=>[e(d,{modelValue:t.value.phone,"onUpdate:modelValue":l[4]||(l[4]=a=>t.value.phone=a),"auto-complete":"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),e(s,{label:"证件类型",style:{"margin-left":"5px"},"label-width":r.formLabelWidth,prop:"cardType"},{default:o(()=>[e(x,{modelValue:t.value.cardType,"onUpdate:modelValue":l[5]||(l[5]=a=>t.value.cardType=a),placeholder:"请选择证件类型"},{default:o(()=>[e(g,{label:"身份证",value:"身份证"})]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),e(s,{label:"证件号码",style:{"margin-left":"5px"},"label-width":r.formLabelWidth,prop:"idCard"},{default:o(()=>[e(d,{modelValue:t.value.idCard,"onUpdate:modelValue":l[6]||(l[6]=a=>t.value.idCard=a),"auto-complete":"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),e(s,{label:"票务类型",style:{"margin-left":"5px"},"label-width":r.formLabelWidth,prop:"type"},{default:o(()=>[e(x,{modelValue:t.value.type,"onUpdate:modelValue":l[7]||(l[7]=a=>t.value.type=a),placeholder:"请选择证件类型"},{default:o(()=>[e(g,{label:"成人票",value:"成人票"}),e(g,{label:"学生票",value:"学生票"}),e(g,{label:"儿童",value:"儿童"})]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),e(s,{label:"国籍",style:{"margin-left":"33px"},"label-width":r.formLabelWidth,prop:"country"},{default:o(()=>[e(x,{modelValue:t.value.country,"onUpdate:modelValue":l[8]||(l[8]=a=>t.value.country=a),placeholder:"请选择国籍"},{default:o(()=>[e(g,{label:"中国",value:"中国"})]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),e(s,{label:"性别",style:{"margin-left":"33px"},"label-width":r.formLabelWidth,prop:"gender"},{default:o(()=>[e(y,{modelValue:t.value.gender,"onUpdate:modelValue":l[9]||(l[9]=a=>t.value.gender=a),label:"男"},{default:o(()=>[i("男")]),_:1},8,["modelValue"]),e(y,{modelValue:t.value.gender,"onUpdate:modelValue":l[10]||(l[10]=a=>t.value.gender=a),label:"女"},{default:o(()=>[i("女")]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),e(s,{label:"常旅客卡",style:{"margin-left":"5px"},"label-width":r.formLabelWidth,prop:"often"},{default:o(()=>[e(y,{modelValue:t.value.often,"onUpdate:modelValue":l[11]||(l[11]=a=>t.value.often=a),label:"有"},{default:o(()=>[i("有")]),_:1},8,["modelValue"]),e(y,{modelValue:t.value.often,"onUpdate:modelValue":l[12]||(l[12]=a=>t.value.often=a),label:"无"},{default:o(()=>[i("无")]),_:1},8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model","rules"]),b("div",X,[e(V,{onClick:h},{default:o(()=>[i("取 消")]),_:1}),e(V,{type:"primary",onClick:L},{default:o(()=>[i("确 定")]),_:1})])]),_:1},8,["modelValue"])])}}},ee=$(Y,[["__scopeId","data-v-af0200f2"]]);export{ee as default};
